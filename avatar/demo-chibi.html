<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Qç‰ˆè§’è‰²ç³»çµ± (ROé¢¨æ ¼)</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, 'Microsoft JhengHei', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
        }
        h1 {
            text-align: center;
            color: white;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        .panel {
            background: white;
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        .preview-area {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }
        .avatar-preview {
            flex: 1;
            min-width: 250px;
            text-align: center;
            background: linear-gradient(180deg, #87CEEB 0%, #98FB98 100%);
            border-radius: 12px;
            padding: 20px;
        }
        #avatarDisplay {
            width: 200px;
            height: 280px;
            margin: 0 auto;
        }
        .controls {
            flex: 2;
            min-width: 300px;
        }
        .control-section {
            margin-bottom: 16px;
        }
        .control-section h3 {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 8px;
        }
        .options {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        .option {
            padding: 8px 16px;
            border: 2px solid #e0e0e0;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 0.85rem;
        }
        .option:hover {
            border-color: #667eea;
        }
        .option.selected {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-color: transparent;
        }
        .color-option {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            border: 3px solid #e0e0e0;
            cursor: pointer;
        }
        .color-option.selected {
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102,126,234,0.3);
        }
        .power-display {
            background: linear-gradient(135deg, #f0f4ff, #fff5f8);
            border-radius: 12px;
            padding: 12px;
            text-align: center;
            margin-top: 16px;
        }
        .power-value {
            font-size: 2rem;
            font-weight: bold;
            color: #e74c3c;
        }
        .equipment-section {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid #eee;
        }
        .equipment-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 12px;
        }
        .equip-item {
            background: #f8f9fa;
            border: 2px solid #e8e8e8;
            border-radius: 10px;
            padding: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
        }
        .equip-item:hover {
            border-color: #667eea;
            transform: translateY(-2px);
        }
        .equip-item.equipped {
            background: linear-gradient(135deg, #d4edda, #c3e6cb);
            border-color: #28a745;
        }
        .equip-item .emoji {
            font-size: 1.8rem;
        }
        .equip-item .name {
            font-size: 0.8rem;
            font-weight: bold;
            margin-top: 4px;
        }
        .equip-item .power {
            font-size: 0.7rem;
            color: #e74c3c;
        }
        .tab-buttons {
            display: flex;
            gap: 8px;
            margin-bottom: 12px;
            flex-wrap: wrap;
        }
        .tab-btn {
            padding: 8px 16px;
            border: none;
            background: #f0f0f0;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.85rem;
        }
        .tab-btn.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ® Qç‰ˆè§’è‰²ç³»çµ± (ROé¢¨æ ¼)</h1>
        
        <div class="panel">
            <div class="preview-area">
                <div class="avatar-preview">
                    <div id="avatarDisplay"></div>
                    <div class="power-display">
                        <div>âš”ï¸ æˆ°é¬¥åŠ›</div>
                        <div class="power-value" id="powerValue">10</div>
                    </div>
                </div>
                
                <div class="controls">
                    <div class="control-section">
                        <h3>ğŸ¨ è†šè‰²</h3>
                        <div class="options" id="skinOptions"></div>
                    </div>
                    
                    <div class="control-section">
                        <h3>ğŸ’‡ é«®å‹</h3>
                        <div class="options" id="hairOptions"></div>
                    </div>
                    
                    <div class="control-section">
                        <h3>ğŸ¨ é«®è‰²</h3>
                        <div class="options" id="hairColorOptions"></div>
                    </div>
                    
                    <div class="control-section">
                        <h3>ğŸ‘ï¸ çœ¼ç›é¡è‰²</h3>
                        <div class="options" id="eyeColorOptions"></div>
                    </div>
                    
                    <div class="control-section">
                        <h3>ğŸ‘„ è¡¨æƒ…</h3>
                        <div class="options" id="mouthOptions"></div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="panel">
            <h2 style="margin-bottom:16px;">ğŸ›¡ï¸ è£å‚™</h2>
            
            <div class="tab-buttons">
                <button class="tab-btn active" data-slot="headwear">é ­é£¾</button>
                <button class="tab-btn" data-slot="weapon">æ­¦å™¨</button>
                <button class="tab-btn" data-slot="accessory">é…ä»¶</button>
            </div>
            
            <div class="equipment-grid" id="equipmentGrid"></div>
        </div>
    </div>

    <script src="avatar-chibi.js"></script>
    <script>
        // ç•¶å‰é…ç½®
        let config = {
            skin: 1,
            hair: 1,
            hairColor: 1,
            eyeColor: 1,
            mouth: 1,
            equipment: {}
        };
        
        // è£å‚™è³‡æ–™
        const EQUIPMENT_DATA = {
            headwear: [
                { id: 'hw1', name: 'å­¸ç”Ÿå¸½', power: 10, emoji: 'ğŸ“' },
                { id: 'hw2', name: 'çš‡å† ', power: 25, emoji: 'ğŸ‘‘' },
                { id: 'hw3', name: 'å…”è€³æœµ', power: 15, emoji: 'ğŸ°' },
                { id: 'hw4', name: 'é­”æ³•å¸«å¸½', power: 30, emoji: 'ğŸ§™' },
                { id: 'hw5', name: 'å·«å¸«å¸½', power: 50, emoji: 'ğŸ©' },
            ],
            weapon: [
                { id: 'wp1', name: 'æœ¨åŠ', power: 30, emoji: 'ğŸ—¡ï¸' },
                { id: 'wp2', name: 'é­”æ³•æ–', power: 50, emoji: 'ğŸª„' },
                { id: 'wp3', name: 'å¼“ç®­', power: 45, emoji: 'ğŸ¹' },
                { id: 'wp4', name: 'æˆ°é¬¥éŒ˜', power: 60, emoji: 'ğŸ”¨' },
                { id: 'wp5', name: 'å‚³èªªä¹‹åŠ', power: 100, emoji: 'âš”ï¸' },
            ],
            accessory: [
                { id: 'ac1', name: 'çœ¼é¡', power: 5, emoji: 'ğŸ‘“' },
                { id: 'ac2', name: 'é …éŠ', power: 12, emoji: 'ğŸ“¿' },
                { id: 'ac3', name: 'æ‰‹éŒ¶', power: 18, emoji: 'âŒš' },
                { id: 'ac4', name: 'é­”æ³•æˆ’æŒ‡', power: 25, emoji: 'ğŸ’' },
                { id: 'ac5', name: 'ç¿…è†€', power: 40, emoji: 'ğŸª½' },
            ]
        };
        
        let currentSlot = 'headwear';
        
        // åˆå§‹åŒ–é¸é …
        function initOptions() {
            // è†šè‰²
            const skinEl = document.getElementById('skinOptions');
            CHIBI_CONFIG.skin.forEach(s => {
                const div = document.createElement('div');
                div.className = 'color-option' + (s.id === config.skin ? ' selected' : '');
                div.style.background = s.color;
                div.onclick = () => { config.skin = s.id; updateAll(); };
                skinEl.appendChild(div);
            });
            
            // é«®å‹
            const hairEl = document.getElementById('hairOptions');
            CHIBI_CONFIG.hair.forEach(h => {
                const div = document.createElement('div');
                div.className = 'option' + (h.id === config.hair ? ' selected' : '');
                div.textContent = h.name;
                div.onclick = () => { config.hair = h.id; updateAll(); };
                hairEl.appendChild(div);
            });
            
            // é«®è‰²
            const hairColorEl = document.getElementById('hairColorOptions');
            CHIBI_CONFIG.hairColor.forEach(c => {
                const div = document.createElement('div');
                div.className = 'color-option' + (c.id === config.hairColor ? ' selected' : '');
                div.style.background = c.color;
                div.onclick = () => { config.hairColor = c.id; updateAll(); };
                hairColorEl.appendChild(div);
            });
            
            // çœ¼ç›é¡è‰²
            const eyeColorEl = document.getElementById('eyeColorOptions');
            CHIBI_CONFIG.eyeColor.forEach(c => {
                const div = document.createElement('div');
                div.className = 'color-option' + (c.id === config.eyeColor ? ' selected' : '');
                div.style.background = c.color;
                div.onclick = () => { config.eyeColor = c.id; updateAll(); };
                eyeColorEl.appendChild(div);
            });
            
            // è¡¨æƒ…
            const mouthEl = document.getElementById('mouthOptions');
            ['å¾®ç¬‘', 'å¤§ç¬‘', 'é©šè¨', 'è²“å˜´'].forEach((name, i) => {
                const div = document.createElement('div');
                div.className = 'option' + (i+1 === config.mouth ? ' selected' : '');
                div.textContent = name;
                div.onclick = () => { config.mouth = i+1; updateAll(); };
                mouthEl.appendChild(div);
            });
        }
        
        // åˆå§‹åŒ–è£å‚™
        function initEquipment() {
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.onclick = () => {
                    document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    currentSlot = btn.dataset.slot;
                    renderEquipment();
                };
            });
            renderEquipment();
        }
        
        function renderEquipment() {
            const grid = document.getElementById('equipmentGrid');
            const items = EQUIPMENT_DATA[currentSlot] || [];
            
            grid.innerHTML = `
                <div class="equip-item ${!config.equipment[currentSlot] ? 'equipped' : ''}" onclick="unequip()">
                    <div class="emoji">âŒ</div>
                    <div class="name">ä¸è£å‚™</div>
                </div>
            ` + items.map(item => `
                <div class="equip-item ${config.equipment[currentSlot] === item.id ? 'equipped' : ''}" 
                     onclick="equip('${item.id}')">
                    <div class="emoji">${item.emoji}</div>
                    <div class="name">${item.name}</div>
                    <div class="power">+${item.power} âš”ï¸</div>
                </div>
            `).join('');
        }
        
        function equip(itemId) {
            config.equipment[currentSlot] = itemId;
            updateAll();
        }
        
        function unequip() {
            delete config.equipment[currentSlot];
            updateAll();
        }
        
        // è¨ˆç®—æˆ°é¬¥åŠ›
        function calculatePower() {
            let power = 10; // åŸºç¤
            for (const slot in config.equipment) {
                const items = EQUIPMENT_DATA[slot];
                const item = items?.find(i => i.id === config.equipment[slot]);
                if (item) power += item.power;
            }
            return power;
        }
        
        // æ›´æ–°æ‰€æœ‰é¡¯ç¤º
        function updateAll() {
            // æ›´æ–°é¸ä¸­ç‹€æ…‹
            document.querySelectorAll('#skinOptions .color-option').forEach((el, i) => {
                el.classList.toggle('selected', i+1 === config.skin);
            });
            document.querySelectorAll('#hairOptions .option').forEach((el, i) => {
                el.classList.toggle('selected', i+1 === config.hair);
            });
            document.querySelectorAll('#hairColorOptions .color-option').forEach((el, i) => {
                el.classList.toggle('selected', i+1 === config.hairColor);
            });
            document.querySelectorAll('#eyeColorOptions .color-option').forEach((el, i) => {
                el.classList.toggle('selected', i+1 === config.eyeColor);
            });
            document.querySelectorAll('#mouthOptions .option').forEach((el, i) => {
                el.classList.toggle('selected', i+1 === config.mouth);
            });
            
            // æ¸²æŸ“è§’è‰²
            document.getElementById('avatarDisplay').innerHTML = renderChibiAvatar(config);
            
            // æ›´æ–°æˆ°é¬¥åŠ›
            document.getElementById('powerValue').textContent = calculatePower();
            
            // æ›´æ–°è£å‚™é¸ä¸­ç‹€æ…‹
            renderEquipment();
        }
        
        // åˆå§‹åŒ–
        initOptions();
        initEquipment();
        updateAll();
    </script>
</body>
</html>
